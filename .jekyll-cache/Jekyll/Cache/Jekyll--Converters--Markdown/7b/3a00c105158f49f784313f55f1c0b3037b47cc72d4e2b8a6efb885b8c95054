I"<p>눈치를 키우자. 가치 함수를 도입했던 이유를 돌이켜보라. 가치 함수는 행위자의 행동이 불러올 미래가 얼마나 좋고 나쁜지 알려준다. 방황하는 정책을 구원해주는 절대자의 역할이었다.</p>

<p>그러나 절대자가 있다면 길 잃은 어린양을 인도할 필요가 없다.</p>

<p>굳이 정책을 표현하는 신경망을 만들고 싶지 않다.</p>

<p><span style="color:blue;"> \(Q^{\pi}\)만을 아는 상황에서 상황 \(s\)에 직면해 있다고 해 보자. 가장 나은 행동을 하고 싶다. 그러면 그저 \(Q^{\pi}(s, \cdot \ )\)에 여러 행동들을 넣어 보면 된다. \(Q^{\pi}\)를 가장 크게 만드는 행동을 골라서 하면 된다.</span> 정말 그럴까? 결론부터 말하자면 그렇다. 언뜻 당연한 규범처럼 보인다. 그러나 영민한 독자들은 많은 의문이 들어야 한다. 따져 보아야 할 부분이 많다.</p>

<p>\(Q^{\pi}(s, a)\)의 정의를 되짚어 보자. 행위자를  \(s\)로 끌고와 강제로 \(a\)를 시켜본다. 그 이후 \(\pi\)에 따라 행동했을 때 미래에 받을 누적 보상의 기댓값이 \(Q^{\pi}(s, a)\)이다. 두 가지 의문이 들어야 한다.</p>

<ol>
  <li>\(\pi\)를 모르는데 \(Q^{\pi}\)를 안다는건 어불성설 아닌가?</li>
  <li><span style="color:blue;">파란</span> 규칙대로 행동하는 행위자의 정책은 \(\pi\)인가?</li>
</ol>

<p>두 가지 의문에 앞서 더 근본적인 문제 의식을 제기해 보자. 단순히 어떤 정책 \(\pi\)의 가치 함수 \(Q^{\pi}\)를 추정하는건 그 자체로서 큰 의미가 없다. \(Q^{\pi}\)를 발판삼아 현재 정책 \(\pi\)보다 더 나은 정책 \(\pi'\)를 알아내는 매커니즘이 있어야 한다. A2C가 그랬다. \(Q^{\pi}\)로 정책 \(\pi\)를 교정해 더 개선된 정책 \(\pi '\)을 만들어낸다.</p>

<p>세 가지 의문점은 자연스러운 방법론을 고안할 수 있다.</p>

<h2 id="헬리콥터-부모">헬리콥터 부모</h2>

<p>가능한 행동이 \(a_1\)와 \(a_2\) 뿐이고 \(Q^{\pi}(s, a_1)\) \(&gt;\) \(Q^{\pi}(s, a_2)\)라 하자. 정책 \(\pi\)는 \(s\)에서 \(a_1\)와 \(a_2\) 중 무엇을 선호할까? 모른다. \(\pi\)는 \(a_2\)를 더 선호할 수도 있다. 그러나 만약 우리가 행동을 강제할 수 있다면 당연히 \(a_1\)를 고른다. 물론 \(a_1\)가 정말로 좋은 행위인지는 모른다. 적어도 그 이후에 \(\pi\)에 따라 행동한다면 \(a_1\)를 하는게 가장 좋다는 말이다.</p>

<p>전형적인 부모 자식의 관계다. 부모는 자식의 정책 \(\pi\)의 가치 \(Q^{\pi}(s, a)\)를 추산하려 무던히도 노력한다. 자식 \(\pi\)에게 \(Q^{\pi}\)가 가장 높은 행동들만 할 것을 강요한다. 부모의 명령을 따라 행동하는 것이 자식의 새로운 정책 \(\pi'\)가 된다. 부모는 \(Q^{\pi'}(s, a)\)를 추산해 다시금 자식의 행동을 교정한다.</p>

<p>이러한 방법론을 살사라 부른다. \(Q^{\pi}\)를 시간차 학습으로 추정하기 위해 필요한 데이터를 그대로 읽은 펀치라인이다. 이를 알고리즘으로 써 보자.</p>

<ol>
  <li>\(Q^{\pi}(s, a)\)를 가장 크게 만드는 행동만을 하는 새로운 정책 \(\pi'\)를 이용해 데이터를 모은다.</li>
  <li>\(\pi'\)의 가치함수 \(Q^{\pi'}(s, a)\)를 추정한다.</li>
  <li>\(\pi\) \(\leftarrow\) \(\pi'\)</li>
</ol>

<p>정책 \(\pi'\)를 표현하는 신경망 따위가 없다는 것에 주목하자. 이전 정책의 가치 함수 \(Q^{\pi}\)가 간접적으로 \(\pi'\)를 정의한다. 마찬가지로 \(\pi'\)의 가치 함수 \(Q^{\pi'}\)는 새로운 정책 \(\pi''\)을 정의한다. 반복한다.</p>

<p>일부러 비극적인 비유를 들어 보았다. 살사는 현실적으로 사용하는 방법론이 아니기 때문이다. 훌닭는 부모 아래 자식의 삶은 불행하다. 더 나은 방법론은 다음 이야기에서 다룬다.</p>
:ET